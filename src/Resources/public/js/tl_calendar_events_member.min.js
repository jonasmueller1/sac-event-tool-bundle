/**
 * SAC Event Tool Web Plugin for Contao
 * Copyright (c) 2008-2017 Marko Cupic
 * @package sac-event-tool-bundle
 * @author Marko Cupic m.cupic@gmx.ch, 2017-2018
 * @link https://sac-kurse.kletterkader.com
 */window.addEvent("domready",function(){var a=null;$$('input[name="sacMemberId"]')[0].addEvent("keyup",function(b){a!=null&&clearTimeout(a),a=setTimeout(function(){a=null,sacMemberId=$$('input[name="sacMemberId"]')[0].get("value"),sacMemberId.length>5&&(new Request.JSON({url:window.location.href,onSuccess:function(a,b){if(a.status==="success"&&a.sacMemberId===sacMemberId){$("acceptAutocompleteBox")!==null&&$("acceptAutocompleteBox").destroy(),$("ctrl_sacMemberId")!==null&&$("ctrl_sacMemberId").hide();var c=new Element("div",{id:"acceptAutocompleteBox"});c.inject($("ctrl_sacMemberId"),"before"),c.appendHTML(' <p class="autocompleteInfo">In der Datenbank wurde zur Mitgliednummer <strong>'+sacMemberId+"</strong> folgendes Mitglied gefunden:</p>"),c.appendHTML(' <p class="autocompleteInfo"><strong>'+a.firstname+" "+a.lastname+", "+a.street+", "+a.postal+" "+a.city+"</strong></p>"),c.appendHTML(' <button id="btnAcceptAutocomplete" class="tl_submit autocomleteBtn">&Uuml;bernehmen</button>&nbsp;&nbsp;&nbsp;&nbsp;<button id="btnRefuseAutocomplete" class="tl_submit autocomleteBtn">Nein</button>'),$("btnAcceptAutocomplete").addEvent("click",function(b){var d=["gender","firstname","lastname","street","postal","city","phone","email","dateOfBirth","vegetarian","emergencyPhone","emergencyPhoneName"];d.each(function(b){$("ctrl_"+b)&&a[b]!==null&&$("ctrl_"+b).set("value",a[b])}),c.destroy(),$("ctrl_sacMemberId").show()}),$("btnRefuseAutocomplete").addEvent("click",function(a){c.destroy(),$("ctrl_sacMemberId").show()})}}})).post({action:"autocompleterLoadMemberDataFromSacMemberId",sacMemberId:sacMemberId,REQUEST_TOKEN:Contao.request_token})},400)})});