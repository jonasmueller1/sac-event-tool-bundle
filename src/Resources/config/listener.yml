services:

  # Initialize System Hook
  markocupic_sac_event_tool.contao_hooks.initialize_system:
    public: true
    class: Markocupic\SacEventToolBundle\ContaoHooks\InitializeSystem
    arguments:
    - "@contao.framework"


  # Parse Backend Template
  markocupic_sac_event_tool.contao_hooks.parse_backend_template:
    public: true
    class: Markocupic\SacEventToolBundle\ContaoHooks\ParseBackendTemplate
    arguments:
    - "@contao.framework"


  # Execute Pre Actions
  markocupic_sac_event_tool.contao_hooks.execute_pre_actions:
    public: true
    class: Markocupic\SacEventToolBundle\ContaoHooks\ExecutePreActions
    arguments:
    - "@contao.framework"

  # Contao add custom regexp hook
  markocupic.sac_event_tool_bundle.event_listener.add_custom_regexp:
    public: true
    class: Markocupic\SacEventToolBundle\EventListener\AddCustomRegexpListener
    arguments:
    - "@contao.framework"
    tags:
    - { name: kernel.event_listener, event: contao.add_custom_regexp, method: onAddCustomRegexp }

  # Contao change event release level hook
  markocupic.sac_event_tool_bundle.event_listener.change_event_release_level:
    public: true
    class: Markocupic\SacEventToolBundle\EventListener\ChangeEventReleaseLevelListener
    arguments:
    - "@contao.framework"
    - '@request_stack'
    - '@contao.routing.scope_matcher'
    tags:
    - { name: kernel.event_listener, event: contao.change_event_release_level, method: onChangeEventReleaseLevel }

  # Contao publish event hook
  markocupic.sac_event_tool_bundle.event_listener.publish_event:
    public: true
    class: Markocupic\SacEventToolBundle\EventListener\PublishEventListener
    arguments:
    - "@contao.framework"
    - '@request_stack'
    - '@contao.routing.scope_matcher'
    tags:
    - { name: kernel.event_listener, event: contao.publish_event, method: onPublishEvent }

  # Contao get page layout hook (purge script cache in debug mode only frontend)
  markocupic.sac_event_tool_bundle.event_listener.get_page_layout:
    public: true
    class: Markocupic\SacEventToolBundle\EventListener\GetPageLayoutListener
    arguments:
    - "@contao.framework"
    - "@kernel"
    - '%kernel.project_dir%'
    tags:
    - { name: kernel.event_listener, event: contao.get_page_layout, method: purgeScriptCacheInDebugMode }

  # Contao get system messages hook (list untreated event subscriptions when logging in into the backend)
  markocupic.sac_event_tool_bundle.event_listener.get_system_messages_listener:
    public: true
    class: Markocupic\SacEventToolBundle\EventListener\GetSystemMessagesListener
    arguments:
    - "@contao.framework"
    - '@request_stack'
    - '@contao.routing.scope_matcher'
    tags:
    - { name: kernel.event_listener, event: get_system_messages_listener, method: listUntreatedEventSubscriptions }

